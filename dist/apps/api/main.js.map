{"version":3,"file":"main.js","mappings":"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","sources":["webpack://calendar/./apps/api/src/app/app.controller.ts","webpack://calendar/./apps/api/src/app/app.module.ts","webpack://calendar/./apps/api/src/app/app.service.ts","webpack://calendar/./apps/api/src/exception/controlled.exception.ts","webpack://calendar/./apps/api/src/exception/customValidation.exception.ts","webpack://calendar/./apps/api/src/exception/httpFilter.exception.ts","webpack://calendar/./apps/api/src/exception/index.ts","webpack://calendar/./apps/api/src/exception/internal-error.exception.ts","webpack://calendar/./apps/api/src/modules/authentication/auth.module.ts","webpack://calendar/./apps/api/src/modules/authentication/guard/role.guard.ts","webpack://calendar/./apps/api/src/modules/authentication/strategy/jwt.strategy.ts","webpack://calendar/./apps/api/src/modules/event/event.module.ts","webpack://calendar/./apps/api/src/modules/google-calendar/dto/create-google-event.dto.ts","webpack://calendar/./apps/api/src/modules/google-calendar/dto/detele-google-event.dto.ts","webpack://calendar/./apps/api/src/modules/google-calendar/dto/get-google-events.dto.ts","webpack://calendar/./apps/api/src/modules/google-calendar/dto/index.ts","webpack://calendar/./apps/api/src/modules/google-calendar/dto/update-google-event.dto.ts","webpack://calendar/./apps/api/src/modules/google-calendar/gcanlendar.controller.ts","webpack://calendar/./apps/api/src/modules/google-calendar/gcanlendar.module.ts","webpack://calendar/./apps/api/src/modules/google-calendar/gcanlendar.service.ts","webpack://calendar/./apps/api/src/modules/room/dtos/create-room.req.ts","webpack://calendar/./apps/api/src/modules/room/dtos/create-room.res.ts","webpack://calendar/./apps/api/src/modules/room/dtos/get-room.req.ts","webpack://calendar/./apps/api/src/modules/room/dtos/get-rooms.res.ts","webpack://calendar/./apps/api/src/modules/room/dtos/update-room.req.ts","webpack://calendar/./apps/api/src/modules/room/room.controller.ts","webpack://calendar/./apps/api/src/modules/room/room.module.ts","webpack://calendar/./apps/api/src/modules/room/room.service.ts","webpack://calendar/./apps/api/src/modules/typeorm/entities/common.entity.ts","webpack://calendar/./apps/api/src/modules/typeorm/entities/event.entity.ts","webpack://calendar/./apps/api/src/modules/typeorm/entities/recurrence_event.entity.ts","webpack://calendar/./apps/api/src/modules/typeorm/entities/room.entity.ts","webpack://calendar/./apps/api/src/modules/typeorm/entities/user.entity.ts","webpack://calendar/./apps/api/src/modules/typeorm/index.ts","webpack://calendar/./apps/api/src/modules/typeorm/typeorm.module.ts","webpack://calendar/./apps/api/src/types/common.ts","webpack://calendar/./apps/api/src/types/const.ts","webpack://calendar/./apps/api/src/types/enum.ts","webpack://calendar/./apps/api/src/types/index.ts","webpack://calendar/./apps/api/src/utils/helper.ts","webpack://calendar/./apps/api/src/utils/index.ts","webpack://calendar/./apps/api/src/utils/pipe.ts","webpack://calendar/./apps/api/src/utils/response.ts","webpack://calendar/external commonjs \"@nestjs/common\"","webpack://calendar/external commonjs \"@nestjs/config\"","webpack://calendar/external commonjs \"@nestjs/core\"","webpack://calendar/external commonjs \"@nestjs/jwt\"","webpack://calendar/external commonjs \"@nestjs/passport\"","webpack://calendar/external commonjs \"@nestjs/swagger\"","webpack://calendar/external commonjs \"@nestjs/typeorm\"","webpack://calendar/external commonjs \"class-transformer\"","webpack://calendar/external commonjs \"class-validator\"","webpack://calendar/external commonjs \"cookie-parser\"","webpack://calendar/external commonjs \"google-auth-library\"","webpack://calendar/external commonjs \"googleapis\"","webpack://calendar/external commonjs \"lodash\"","webpack://calendar/external commonjs \"moment-timezone\"","webpack://calendar/external commonjs \"nest-winston\"","webpack://calendar/external commonjs \"passport-jwt\"","webpack://calendar/external commonjs \"rrule\"","webpack://calendar/external commonjs \"tslib\"","webpack://calendar/external commonjs \"typeorm\"","webpack://calendar/external commonjs \"winston\"","webpack://calendar/external commonjs \"winston-daily-rotate-file\"","webpack://calendar/external node-commonjs \"crypto\"","webpack://calendar/external node-commonjs \"fs\"","webpack://calendar/external node-commonjs \"path\"","webpack://calendar/webpack/bootstrap","webpack://calendar/./apps/api/src/main.ts"],"sourcesContent":["import { Controller, Get } from '@nestjs/common'\n\nimport { AppService } from './app.service'\nimport { ApiResponse, ApiTags } from '@nestjs/swagger'\nimport { CommonReponse } from '../utils'\n\n@ApiTags('Common Response Format')\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  @ApiResponse({\n    type: CommonReponse\n  })\n  getData() {\n    return this.appService.getData()\n  }\n}\n","import { Module } from '@nestjs/common'\nimport { ConfigModule, ConfigService } from '@nestjs/config'\nimport { AppController } from './app.controller'\nimport { AppService } from './app.service'\nimport { GoogleCalendarModule } from '../modules/google-calendar/gcanlendar.module'\n\nimport { WinstonModule } from 'nest-winston'\nimport { format, transports } from 'winston'\nimport * as DailyRotateFile from 'winston-daily-rotate-file'\nimport { TypeormConfigModule } from '../modules/typeorm/typeorm.module'\nimport { AuthModule } from '../modules/authentication/auth.module'\nimport { RoomModule } from '../modules/room/room.module'\nimport { EventModule } from '../modules/event/event.module'\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n      envFilePath: '.env'\n    }),\n    // For TypeORM Postgres\n    TypeormConfigModule,\n    // For Winston Logger\n    WinstonModule.forRoot({\n      format: format.combine(\n        format.errors({ stack: true }),\n        format.splat(),\n        format.timestamp({\n          format: () => new Date().toLocaleString()\n        }),\n        format.printf((log) => {\n          const { timestamp, level, message, ...args } = log\n          const ts = timestamp.slice(0, 19).replace('T', ' ')\n          return `${ts} [${level}]: ${message} ${Object.keys(args).length ? JSON.stringify(args, null, 2) : ''}`\n        })\n      ),\n      transports: [\n        new transports.Console({\n          level: 'debug',\n          handleExceptions: true\n        }),\n        new DailyRotateFile({\n          dirname: './logs/infos/',\n          filename: 'info-%DATE%.log',\n          datePattern: 'YYYY-MM-DD',\n          maxFiles: '2d',\n          maxSize: '20m',\n          zippedArchive: false,\n          level: 'info'\n        }),\n        new DailyRotateFile({\n          dirname: './logs/erros/',\n          filename: 'error-%DATE%.log',\n          datePattern: 'YYYY-MM-DD',\n          maxFiles: '2d',\n          maxSize: '20m',\n          zippedArchive: false,\n          level: 'error'\n        })\n      ]\n    }),\n    AuthModule,\n    GoogleCalendarModule,\n    RoomModule,\n    EventModule\n  ],\n  controllers: [AppController],\n  providers: [AppService]\n})\nexport class AppModule {}\n","import { Inject, Injectable } from '@nestjs/common';\nimport { Logger } from 'winston';\n\n@Injectable()\nexport class AppService {\n  constructor(@Inject('winston') private readonly logger: Logger) {}\n\n  getData(): string {\n    this.logger.info('Calendar API is running!');\n    return 'Calendar API is running!';\n  }\n}\n","import { HttpException, HttpStatus } from '@nestjs/common'\nimport { response } from '../utils'\n\nexport class UnauthorizedException extends HttpException {\n  constructor(msg?: unknown) {\n    super({ code: HttpStatus.UNAUTHORIZED, message: msg || 'Unauthorized' }, HttpStatus.UNAUTHORIZED)\n  }\n}\n\nexport class ExceptionConflict extends HttpException {\n  constructor(msg?: unknown) {\n    super(\n      response({ code: HttpStatus.CONFLICT, message: msg || 'Already exists' }, HttpStatus.CONFLICT, 'FAIL'),\n      HttpStatus.CONFLICT\n    )\n  }\n}\n\nexport class ExceptionNotFound extends HttpException {\n  constructor(msg?: unknown) {\n    super(response({ message: msg || 'Not found' }, HttpStatus.NOT_FOUND, 'FAIL'), HttpStatus.NOT_FOUND)\n  }\n}\n\nexport class ExceptionBadRequest extends HttpException {\n  constructor(msg?: unknown) {\n    super(\n      response({ code: HttpStatus.BAD_REQUEST, message: msg || 'Bad request' }, HttpStatus.BAD_REQUEST, 'FAIL'),\n      HttpStatus.BAD_REQUEST\n    )\n  }\n}\n\nexport class ExceptionUnauthorized extends HttpException {\n  constructor(msg?: unknown) {\n    super(\n      response({ code: HttpStatus.UNAUTHORIZED, message: msg || 'Unauthorized' }, HttpStatus.UNAUTHORIZED, 'FAIL'),\n      HttpStatus.UNAUTHORIZED\n    )\n  }\n}\n\nexport class ExceptionForbidden extends HttpException {\n  constructor(msg?: unknown) {\n    super(\n      response({ code: HttpStatus.FORBIDDEN, message: msg || 'Forbidden' }, HttpStatus.FORBIDDEN, 'FAIL'),\n      HttpStatus.FORBIDDEN\n    )\n  }\n}\n","import { ArgumentMetadata, BadRequestException, ValidationPipe } from '@nestjs/common'\nimport { ValidationError } from 'class-validator'\nimport { response } from '../utils'\n\nexport class CustomeValidationPipe extends ValidationPipe {\n  public async transform(value: any, metadata: ArgumentMetadata): Promise<any> {\n    try {\n      return await super.transform(value, metadata)\n    } catch (error) {\n      if (error instanceof BadRequestException) {\n        const errors = error.getResponse() as ValidationError[]\n        throw new BadRequestException(response(errors, 400, 'VALIDATION FAIL'))\n      }\n    }\n  }\n}\n","import { ArgumentsHost, Catch, ExceptionFilter, HttpException, HttpStatus } from '@nestjs/common'\nimport { HttpAdapterHost } from '@nestjs/core'\n@Catch()\nexport class GlobalExceptionsFilter implements ExceptionFilter {\n  constructor(private readonly httpAdapterHost: HttpAdapterHost) {}\n\n  catch(exception: any, host: ArgumentsHost): void {\n    let responseBody: unknown\n    const { httpAdapter } = this.httpAdapterHost\n    const ctx = host.switchToHttp()\n    const httpStatus = exception instanceof HttpException ? exception.getStatus() : HttpStatus.INTERNAL_SERVER_ERROR\n\n    // Response for controlled exception\n    if (exception instanceof HttpException) {\n      responseBody = exception.getResponse()\n    }\n\n    if (401 === exception.status) {\n      responseBody = {\n        code: httpStatus,\n        info: 'FAIL',\n        message: exception.message\n      }\n    }\n\n    // Response for unhandled exception\n    if (httpStatus === HttpStatus.INTERNAL_SERVER_ERROR) {\n      responseBody = {\n        code: httpStatus,\n        info: 'FAIL',\n        message: exception.response || 'Internal Server Error'\n      }\n    }\n\n    httpAdapter.reply(ctx.getResponse(), responseBody, httpStatus)\n  }\n}\n","export * from './controlled.exception'\nexport * from './internal-error.exception'\nexport * from './customValidation.exception'\n","import { HttpException, HttpStatus } from '@nestjs/common'\n\nexport class ServerError extends HttpException {\n  constructor(msg?: any) {\n    super(msg || 'Internal Server Error', HttpStatus.INTERNAL_SERVER_ERROR)\n  }\n}\n","import { Module } from '@nestjs/common'\nimport { ConfigModule } from '@nestjs/config'\nimport { JwtModule, JwtService } from '@nestjs/jwt'\nimport { PassportModule } from '@nestjs/passport'\nimport { JwtStrategy } from './strategy/jwt.strategy'\n\n@Module({\n  imports: [\n    JwtModule.register({\n      secret: process.env.ACCESS_TOKEN_SECRET,\n      signOptions: { expiresIn: `${process.env.ACCESS_TOKEN_TTL_IN_DAY}d` }\n    })\n  ],\n  controllers: [],\n  providers: [JwtStrategy]\n})\nexport class AuthModule {}\n","import { CanActivate, ExecutionContext, Injectable, SetMetadata, mixin } from '@nestjs/common'\nimport { Role } from '../../../types/enum'\nimport { createParamDecorator } from '@nestjs/common'\nimport { GoogleCalendarService } from '../../google-calendar/gcanlendar.service'\nimport { ExceptionForbidden } from '../../../exception'\n\nexport const ROLES_KEY = 'roles'\nexport const Roles = (...roles: Role[]) => SetMetadata(ROLES_KEY, roles)\n\nexport const AuthUser = createParamDecorator((data: unknown, ctx: ExecutionContext) => {\n  const req = ctx.switchToHttp().getRequest()\n  return req['user']\n})\n\nexport const RoleGuard = (roles: Role[]) => {\n  class Guard implements CanActivate {\n    async canActivate(context: ExecutionContext): Promise<boolean> {\n      const request = context.switchToHttp().getRequest()\n      return roles.includes(request?.user?.role)\n    }\n  }\n  return mixin(Guard)\n}\n\nexport const PermisionUpdate = () => {\n  @Injectable()\n  class Guard implements CanActivate {\n    constructor(private readonly calendarService: GoogleCalendarService) {}\n    async canActivate(context: ExecutionContext): Promise<boolean> {\n      const request = context.switchToHttp().getRequest()\n      if ([Role.ADMIN, Role.DIRECTOR, Role.MANAGER].includes(request.user.role_name)) return true\n\n      const event = await this.calendarService.getCalendarEventByIdService(request.params.eventId)\n\n      if (!event) throw new ExceptionForbidden('Event not found')\n\n      if (event?.extendedProperties?.private?.creator_id === request.user.id) return true\n\n      throw new ExceptionForbidden('You do not have permission to update this event')\n    }\n  }\n  return mixin(Guard)\n}\n","import { Inject, Injectable } from '@nestjs/common'\nimport { PassportStrategy } from '@nestjs/passport'\nimport { ExtractJwt, Strategy } from 'passport-jwt'\nimport { Logger } from 'winston'\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy, 'jwt') {\n  constructor(@Inject('winston') private readonly logger: Logger) {\n    super({\n      jwtFromRequest: ExtractJwt.fromExtractors([\n        (req) => {\n          return req?.cookies[process.env.TOKEN_KEY_COOKIE]\n        }\n      ]),\n      ignoreExpiration: false,\n      secretOrKey: process.env.ACCESS_TOKEN_SECRET\n    })\n  }\n\n  validate(payload: unknown) {\n    this.logger.info(this.name.toString() + 'JWT Strategy validate %s' + JSON.stringify(payload))\n    return payload\n  }\n}\n","import { Module } from '@nestjs/common'\nimport { TypeOrmModule } from '@nestjs/typeorm'\nimport { MeetingRoom, UserEntity } from '../typeorm'\n\n@Module({\n  imports: [TypeOrmModule.forFeature([MeetingRoom, UserEntity])],\n  controllers: [],\n  providers: [],\n  exports: []\n})\nexport class EventModule {}\n","import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger'\nimport { Type } from 'class-transformer'\nimport {\n  ArrayNotEmpty,\n  IsArray,\n  IsBoolean,\n  IsEmail,\n  IsNotEmpty,\n  IsNotEmptyObject,\n  IsObject,\n  IsOptional,\n  IsString,\n  Matches,\n  ValidateNested\n} from 'class-validator'\n\nexport class Email {\n  @ApiProperty({\n    required: true\n  })\n  @IsNotEmpty()\n  @IsEmail()\n  email: string\n}\n\nexport class EventDate {\n  @ApiProperty({\n    required: true,\n    description:\n      'Phải có cả hai trường: dateTime và date .Một trong hai phải bằng null. <h3> date dành cho Event cả ngày. dateTime dành cho Event có giờ giấc </h3>',\n    example: 'Có thể là dạng ISO: 2023-01-17T02:34:01.000Z or UTC: 2023-04-27T10:00:00+07:00 or 2023-01-17 '\n  })\n  // @IsDateString({\n  //   message: 'dateTime must be a date string'\n  // })\n  @IsOptional()\n  dateTime: string\n\n  @ApiProperty({\n    required: true,\n    description:\n      'Phải có cả hai trường: dateTime và date.Một trong hai phải bằng null. <h3> date dành cho Event cả ngày. dateTime dành cho Event có giờ giấc </h3>',\n    example: 'Có thể là dạng ISO: 2023-01-17T02:34:01.000Z or UTC: 2023-04-27T10:00:00+07:00 or 2023-01-17'\n  })\n  // @IsDateString({\n  //   message: 'date must be a date string'\n  // })\n  @IsOptional()\n  date: string\n\n  @ApiPropertyOptional({\n    description: 'Mặc định bằng Asia/Ho_Chi_Minh',\n    example: 'Asia/Ho_Chi_Minh'\n  })\n  @IsString({\n    message: 'timeZone must be a string'\n  })\n  @IsOptional()\n  timeZone: string\n}\n\nexport class EventMetaData {\n  @ApiProperty({ required: false, description: 'CALI' })\n  @IsString({ message: 'Room name must be a string' })\n  @IsOptional()\n  name?: string\n\n  @ApiProperty({ required: true, description: 'room_id' })\n  @IsNotEmpty({ message: 'room_id is required, phỏng vấn online, room_id = \"null\" ' })\n  room_id?: string\n\n  @ApiPropertyOptional({ description: 'creator_id' })\n  @IsOptional()\n  creator_id?: string\n\n  @ApiPropertyOptional({ description: 'creator_email' })\n  @IsOptional()\n  creator_email?: string\n\n  @ApiPropertyOptional({ description: 'attendee_ids' })\n  @IsOptional()\n  attendees_id?: string\n\n  @ApiPropertyOptional({ description: 'candidate_id' })\n  @IsOptional()\n  candidate_id?: string\n}\n\nexport class Creator {\n  @IsOptional()\n  @IsEmail()\n  email?: string\n\n  @IsOptional()\n  id?: string\n}\n\nexport class CreateGoogleEventReq {\n  @ApiProperty({\n    description:\n      'Không phải mã hex, colorId là số nguyên thuộc [0-11]. Gọi api: /api/calendar/color để lấy danh sách mã màu',\n    example: '5'\n  })\n  @Matches(/^([0-9]|1[01])$/, { message: 'colorId must be a number in [0-11]' })\n  colorId?: string\n\n  @ApiProperty({ required: true, description: 'Title of Event', example: 'Event title' })\n  @IsNotEmpty({ message: 'Event summary is required' })\n  @IsOptional()\n  summary?: string\n\n  @ApiPropertyOptional({ description: 'Description of Events abcef' })\n  @IsOptional()\n  description?: string\n\n  @ApiPropertyOptional({ example: 'Hanoi, Vietnam' })\n  @IsOptional()\n  location?: string\n\n  @ApiPropertyOptional({ example: 'abc@gmail.com' })\n  @IsObject({ message: 'creator must be an object' })\n  @IsOptional()\n  @Type(() => Creator)\n  @ValidateNested()\n  creator?: Creator\n\n  @ApiPropertyOptional({\n    description: 'Recurrent of events (RRULE lib: )',\n    example: '[RRULE:FREQ=DAILY;COUNT=2;UNTIL=20230117T104400Z] \\n '\n  })\n  @ArrayNotEmpty()\n  @IsString({ each: true })\n  @IsOptional()\n  recurrence?: string[]\n\n  @ApiPropertyOptional({\n    description: 'Attendees of events',\n    example: [\n      {\n        email: '19020202@vnu.edu.vn'\n      }\n    ]\n  })\n  @IsOptional()\n  @ValidateNested({ each: true })\n  @Type(() => Email)\n  @IsArray({\n    message: 'attendees must be an array'\n  })\n  @IsObject({\n    each: true\n  }) // Exclude for 2d array: [[]]\n  attendees: Email[]\n\n  @ApiProperty({\n    required: true,\n    description:\n      'Phải có một trong hai trường: dateTime hoặc date. Nếu có dateTime thì sẽ không có date. Lưu ý TimeZone',\n    example: {\n      dateTime: '2021-08-01T09:00:00+07:00',\n      timeZone: 'Asia/Ho_Chi_Minh'\n    }\n  })\n  @IsNotEmptyObject()\n  @IsObject()\n  @Type(() => EventDate)\n  @ValidateNested()\n  start: EventDate\n\n  @ApiProperty({\n    required: true,\n    description:\n      'Phải có một trong hai trường: dateTime hoặc date. Nếu có dateTime thì sẽ không có date.Lưu ý TimeZone',\n    example: {\n      dateTime: '2021-08-01T09:00:00+07:00',\n      timeZone: 'Asia/Ho_Chi_Minh'\n    }\n  })\n  @IsNotEmptyObject()\n  @IsObject()\n  @Type(() => EventDate)\n  @ValidateNested()\n  end: EventDate\n\n  @ApiPropertyOptional({\n    description: 'Có tạo meeting mới không?',\n    example: true\n  })\n  @IsOptional()\n  @IsBoolean()\n  is_new_meet: boolean\n\n  @ApiProperty({\n    required: true,\n    description: 'Meta của Event. Lưu ý: room_id là bắt buộc',\n    example: {\n      room_id: '123456789',\n      room_name: '1321'\n    }\n  })\n  @IsNotEmptyObject()\n  @IsObject()\n  @Type(() => EventMetaData)\n  @ValidateNested()\n  extendedProperties: EventMetaData\n}\n","import { ApiProperty } from '@nestjs/swagger'\nimport { IsEnum, IsNotEmpty } from 'class-validator'\n\nexport class DeleteEventReq {\n  @ApiProperty({\n    required: true,\n    description: 'Update type: single, all, following'\n  })\n  @IsEnum(['single', 'all', 'following'], {\n    message: 'update_type must be a string in [single, all, following]'\n  })\n  delete_type: string\n}\n","import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger'\nimport { IsDate, IsDateString, IsNotEmpty, IsOptional, IsString } from 'class-validator'\nimport * as moment from 'moment-timezone'\n\nexport class GetEventReq {\n  @ApiProperty({\n    description: 'timeMin',\n    example: `<div>import * as moment from 'moment-timezone'</div> <br> moment().add(3, 'days').startOf('day').tz('Asia/Ho_Chi_Minh').format() \\n <div> ${moment()\n      .add(0, 'days')\n      .startOf('day')\n      .tz('Asia/Ho_Chi_Minh')\n      .format()}\n      </div> `\n  })\n  @IsNotEmpty()\n  timeMin: string\n\n  @ApiProperty({\n    description: 'timeMax',\n    example: `<div>import * as moment from 'moment-timezone'</div> <br> moment().add(3, 'days').startOf('day').tz('Asia/Ho_Chi_Minh').format() \\n <div> ${moment()\n      .add(7, 'days')\n      .startOf('day')\n      .tz('Asia/Ho_Chi_Minh')\n      .format()}\n      </div> `\n  })\n  @IsNotEmpty()\n  timeMax: string\n\n  @ApiPropertyOptional({ description: 'room_id', example: 'room_id' })\n  @IsString()\n  @IsOptional()\n  room_id: string\n\n  @ApiPropertyOptional({ description: 'creator_id', example: 'creator_id' })\n  @IsString()\n  @IsOptional()\n  creator_id: string\n\n  @ApiPropertyOptional({ description: 'creator_id', example: 'creator_id' })\n  @IsString()\n  @IsOptional()\n  creator_email: string\n\n  @ApiPropertyOptional({ description: 'candidate_id', example: 'candidate_id' })\n  @IsOptional()\n  candidate_id: string\n}\n","export * from './create-google-event.dto'\nexport * from './get-google-events.dto'\nexport * from './update-google-event.dto'\nexport * from './detele-google-event.dto'","import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger'\nimport { CreateGoogleEventReq, EventDate, EventMetaData } from './create-google-event.dto'\nimport {\n  IsBoolean,\n  IsEnum,\n  IsNotEmptyObject,\n  IsObject,\n  IsOptional,\n  Matches,\n  Max,\n  Min,\n  ValidateNested\n} from 'class-validator'\nimport { Type } from 'class-transformer'\n\nexport class GoogleEventReq$Optional extends CreateGoogleEventReq {\n  @ApiPropertyOptional({\n    description:\n      'Không phải mã hex, colorId là số nguyên thuộc [0-11]. Gọi api: /api/calendar/color để lấy danh sách mã màu',\n    example: '0'\n  })\n  @Matches(/^([0-9]|1[01])$/, {\n    message: 'colorId must be a number in [0-11]'\n  })\n  @IsOptional()\n  colorId?: string\n\n  @ApiPropertyOptional({\n    required: true,\n    description:\n      'Phải có một trong hai trường: dateTime hoặc date. Nếu có dateTime thì sẽ không có date. Lưu ý TimeZone',\n    example: {\n      dateTime: '2021-08-01T09:00:00+07:00',\n      timeZone: 'Asia/Ho_Chi_Minh'\n    }\n  })\n  @IsNotEmptyObject()\n  @IsObject()\n  @IsOptional()\n  @Type(() => EventDate)\n  start: EventDate\n\n  @ApiPropertyOptional({\n    required: true,\n    description:\n      'Phải có một trong hai trường: dateTime hoặc date. Nếu có dateTime thì sẽ không có date.Lưu ý TimeZone',\n    example: {\n      dateTime: '2021-08-01T09:30:00+07:00',\n      timeZone: 'Asia/Ho_Chi_Minh'\n    }\n  })\n  @IsNotEmptyObject()\n  @IsObject()\n  @IsOptional()\n  @Type(() => EventDate)\n  end: EventDate\n\n  @ApiProperty({\n    required: true,\n    description: 'Title of Event',\n    example: 'Event title'\n  })\n  @IsOptional()\n  summary?: string\n\n  @ApiPropertyOptional({\n    description: 'Có xóa meet hay không',\n    example: true\n  })\n  @IsOptional()\n  @IsBoolean()\n  is_remove_meet?: boolean\n\n  @ApiProperty({\n    required: true,\n    description: 'Meta của Event. Lưu ý: room_id là bắt buộc',\n    example: {\n      room_id: '123456789',\n      room_name: '1321'\n    }\n  })\n  @IsObject()\n  @Type(() => EventMetaData)\n  @ValidateNested()\n  @IsOptional()\n  extendedProperties: EventMetaData\n\n  @ApiProperty({\n    required: true,\n    description:\n      'single: chỉ update event này, all: update tất cả các instance event, follow: update tất cả các event sau event này',\n    example: 'single | all | following'\n  })\n  @IsEnum(['single', 'all', 'following'], {\n    message: 'update_type must be a string in [single, all, following]'\n  })\n  update_type: string\n}\n\nexport class UpdateGoogleEventReq extends GoogleEventReq$Optional {}\n","import { Body, Controller, Delete, Get, HttpStatus, Inject, Param, Post, Put, Query, UseGuards } from '@nestjs/common'\nimport { ApiOperation, ApiResponse, ApiTags } from '@nestjs/swagger'\nimport { Logger } from 'winston'\nimport { response } from '../../utils'\nimport { EventDatePipe } from '../../utils/pipe'\nimport { JwtAuthGuard } from '../authentication/guard/jwt.guard'\nimport { AuthUser, PermisionUpdate } from '../authentication/guard/role.guard'\nimport { CreateGoogleEventReq, DeleteEventReq, GetEventReq, UpdateGoogleEventReq } from './dto'\nimport { GoogleCalendarService } from './gcanlendar.service'\nimport { User } from './types/auth.user'\n\n@ApiTags('Google Calendar')\n@Controller('calendar')\nexport class GoogleCalendarController {\n  constructor(\n    @Inject('winston') private readonly logger: Logger,\n    private readonly gcanlendarService: GoogleCalendarService\n  ) {}\n\n  @ApiOperation({ summary: 'Get All calendar events', description: 'Get calendar events' })\n  @ApiResponse({ status: HttpStatus.OK, description: 'Get calendar events', type: [CreateGoogleEventReq] })\n  // @UseGuards(JwtAuthGuard)\n  @Get('event')\n  async getCalendarEvents(@Query() query: GetEventReq) {\n    return response(await this.gcanlendarService.getEventsService(query))\n  }\n\n  @ApiOperation({ summary: 'Get event detail by id', description: 'Get calendar event by id' })\n  @ApiResponse({ status: HttpStatus.OK, type: CreateGoogleEventReq })\n  // @UseGuards(JwtAuthGuard)\n  @Get('event/:eventId')\n  async getCalendarEventById(@Param('eventId') eventId: string) {\n    return response(await this.gcanlendarService.getCalendarEventByIdService(eventId))\n  }\n\n  @ApiOperation({ summary: 'Update Event' })\n  @ApiResponse({ status: HttpStatus.OK, type: CreateGoogleEventReq })\n  @UseGuards(PermisionUpdate())\n  // @UseGuards(JwtAuthGuard)\n  @Put('/event/:eventId')\n  async updateEvent(@Param('eventId') eventId: string, @Body(new EventDatePipe()) event: UpdateGoogleEventReq) {\n    return response(await this.gcanlendarService.updateEventService(eventId, event))\n  }\n\n  @ApiResponse({ status: HttpStatus.OK, type: CreateGoogleEventReq })\n  @ApiOperation({ summary: 'Create Google calendar event', description: 'Create Google calendar event' })\n  // @UseGuards(JwtAuthGuard)\n  @Post('/event')\n  async createEvents(@Body(new EventDatePipe()) event: CreateGoogleEventReq, @AuthUser() user: User) {\n    return response(await this.gcanlendarService.createEventsService(event, user))\n  }\n\n  @Get('/authorize')\n  @ApiOperation({ summary: 'API for Admin only' })\n  async authorizeGoogle() {\n    return response(await this.gcanlendarService.authorize())\n  }\n\n  @Get('/color')\n  @ApiOperation({ summary: 'Get available Calendar list colors' })\n  async getAvailableColor() {\n    return response(await this.gcanlendarService.getColorEventService())\n  }\n\n  @ApiOperation({ summary: 'Delete event' })\n  @UseGuards(PermisionUpdate())\n  // @UseGuards(JwtAuthGuard)\n  @Delete('event/:eventId')\n  async deleteEvent(@Param('eventId') eventId: string, @Query() query: DeleteEventReq) {\n    return response(await this.gcanlendarService.deleteEventService(eventId, query))\n  }\n\n  // @UseGuards(JwtAuthGuard)\n  @Get('event/instance/:eventId')\n  @ApiOperation({ summary: 'Get all instances of the specified recurring event' })\n  async getRecurrenceInstances(@Param('eventId') eventId: string) {\n    return response(await this.gcanlendarService.getInstanceOfRecurrenceService(eventId))\n  }\n\n  @Get('oauth2callback')\n  async oauth2callback(@Query('code') code: string) {\n    return response(await this.gcanlendarService.oauth2callback(code))\n  }\n}\n","import { Module } from '@nestjs/common'\nimport { GoogleCalendarController } from './gcanlendar.controller'\nimport { GoogleCalendarService } from './gcanlendar.service'\nimport { AuthModule } from '../authentication/auth.module'\n\n@Module({\n  imports: [AuthModule],\n  controllers: [GoogleCalendarController],\n  providers: [GoogleCalendarService],\n  exports: []\n})\nexport class GoogleCalendarModule {}\n","import { Inject, Injectable } from '@nestjs/common'\nimport { ConfigService } from '@nestjs/config'\nimport { randomUUID } from 'crypto'\nimport { promises as fs } from 'fs'\nimport { OAuth2Client } from 'google-auth-library'\nimport { calendar_v3, google } from 'googleapis'\nimport * as _ from 'lodash'\nimport * as path from 'path'\nimport { RRule } from 'rrule'\nimport { Logger } from 'winston'\nimport {\n  ExceptionBadRequest,\n  ExceptionForbidden,\n  ExceptionNotFound,\n  ExceptionUnauthorized\n} from '../../exception/controlled.exception'\nimport { ServerError } from '../../exception/internal-error.exception'\nimport { DeleteType, GoogleAuthError, GoogleError, Status, UpdateType, VN, message } from '../../types'\nimport { date_add_milisecond, date_diff, date_sort_asc, date_substract } from '../../utils/helper'\nimport { CreateGoogleEventReq, GetEventReq, UpdateGoogleEventReq } from './dto'\nimport { User } from './types/auth.user'\nimport { DeleteEventReq } from './dto/detele-google-event.dto'\n\nexport type Event = calendar_v3.Schema$Event\nexport type Calendar = calendar_v3.Calendar\n\n@Injectable()\nexport class GoogleCalendarService {\n  private calendar: Calendar\n  private calendarId: string\n  private TOKEN_PATH: string\n  private CREDENTIALS_PATH: string\n  private oAuth2Client: OAuth2Client\n\n  constructor(private configService: ConfigService, @Inject('winston') private readonly logger: Logger) {\n    this.TOKEN_PATH = path.join(process.cwd(), 'token.json')\n    this.CREDENTIALS_PATH = path.join(process.cwd(), 'credentials.json')\n    this.calendarId = this.configService.get('GOOGLE_CALANDER_ID')\n    this.oAuth2Client = new OAuth2Client(\n      this.configService.get('GOOGLE_CLIENT_ID'),\n      this.configService.get('GOOGLE_CLIENT_SECRET'),\n      this.configService.get('GOOGLE_REDIRECT_URL')\n    )\n  }\n\n  async oauth2callback(code: string) {\n    try {\n      const r = await this.oAuth2Client.getToken(code)\n      this.oAuth2Client.setCredentials(r.tokens)\n      this.calendar = google.calendar({ version: 'v3', auth: this.oAuth2Client })\n      await this.saveCredentials(r.tokens)\n      this.logger.info('oauth2callback() OK', r.tokens)\n    } catch (error) {\n      this.logger.error('oauth2callback() FAIL', error)\n      throw new ServerError(error)\n    }\n  }\n\n  async loadSavedCredentialsIfExist() {\n    try {\n      const content = await fs.readFile(this.TOKEN_PATH, 'ascii')\n      return JSON.parse(content)\n    } catch (error) {\n      this.logger.error('loadSavedCredentialsIfExist() FAIL', error)\n      return null\n    }\n  }\n\n  async saveCredentials(token) {\n    await fs.writeFile(this.TOKEN_PATH, JSON.stringify(token))\n  }\n\n  async authorize() {\n    try {\n      const savedToken = await this.loadSavedCredentialsIfExist()\n      if (savedToken) {\n        this.oAuth2Client.setCredentials(savedToken)\n        if (savedToken.expiry_date < Date.now()) {\n          const newToken = await this.oAuth2Client.refreshAccessToken()\n          await this.saveCredentials(newToken.credentials)\n          this.logger.info('Token expired, refreshing token', { newToken: newToken.credentials })\n          this.oAuth2Client.setCredentials(newToken.credentials)\n        }\n        this.calendar = google.calendar({ version: 'v3', auth: this.oAuth2Client })\n        return message.GOOGLE_AUTHORIZED\n      }\n\n      this.logger.info('Authorizing Google Calendar,...', { path: this.CREDENTIALS_PATH })\n      const authorizeUrl = this.oAuth2Client.generateAuthUrl({\n        access_type: 'offline',\n        scope: 'https://www.googleapis.com/auth/calendar'\n      })\n      return authorizeUrl\n    } catch (error) {\n      this.logger.error('Google Calendar Authorize Fail', error)\n      throw new ServerError({\n        message: 'Google Calendar Authorize Fail !'\n      })\n    }\n  }\n\n  async googleExceptionHandler(error: any, message?: string | object): Promise<any> {\n    if ([404, 410].includes(error.code)) {\n      throw new ExceptionNotFound(message)\n    }\n    if ([403].includes(error.status)) {\n      throw new ExceptionForbidden(message)\n    }\n    if ([400].includes(error.code || error.status)) {\n      throw error\n    }\n\n    if (!this.calendar || !this.oAuth2Client) {\n      throw new ExceptionUnauthorized('Unauthorized, Please re-auth with Google Calendar')\n    }\n\n    if (GoogleAuthError.includes(error.message)) {\n      this.logger.error('Refresh Token invalid, Remove Token File, Try to re-auth')\n      await fs.unlink(this.TOKEN_PATH)\n      this.oAuth2Client = null\n      this.authorize()\n    }\n\n    if (error.message === GoogleError.LIMIT_EXCEEDED) {\n      throw new ExceptionBadRequest({\n        message: 'Limit Exceeded'\n      })\n    }\n    throw new ServerError(message)\n  }\n\n  async createEventsService(event: CreateGoogleEventReq, user?: User): Promise<Event> {\n    try {\n      await this.authorize()\n\n      if (user?.id) {\n        event.extendedProperties.creator_id = user?.id\n      }\n\n      const res = await this.calendar.events.insert({\n        calendarId: this.calendarId,\n        sendUpdates: 'all',\n        conferenceDataVersion: 1,\n        requestBody: {\n          colorId: event.colorId.toString(),\n          summary: event.summary,\n          location: event.location,\n          description: event.description,\n          recurrence: event.recurrence,\n          creator: event.creator,\n          start: { ...event.start, timeZone: VN },\n          end: { ...event.end, timeZone: VN },\n          attendees: event.attendees || [],\n          reminders: {\n            useDefault: false,\n            overrides: [{ method: 'email', minutes: 30 }]\n          },\n          conferenceData: event.is_new_meet && {\n            createRequest: {\n              conferenceSolutionKey: { type: 'hangoutsMeet' },\n              requestId: randomUUID()\n            }\n          },\n          extendedProperties: {\n            private: { ...event?.extendedProperties }\n          }\n        }\n      })\n\n      return res.data\n    } catch (error) {\n      this.logger.error(error)\n      return this.googleExceptionHandler(error, {\n        info: 'Error: create event failed!',\n        detail: error?.message\n      })\n    }\n  }\n\n  async getInstanceOfRecurrenceService(eventId: string): Promise<Event[]> {\n    try {\n      await this.authorize()\n      const eventInstance = await this.calendar.events.instances({\n        eventId: eventId,\n        calendarId: this.calendarId\n      })\n      return eventInstance.data.items.sort((a, b) => {\n        return date_sort_asc(\n          a.originalStartTime?.date || a.originalStartTime?.dateTime,\n          b.originalStartTime?.date || b.originalStartTime?.dateTime\n        )\n      })\n    } catch (error) {\n      this.logger.error('getInstanceOfRecurrenceService()', error)\n      return this.googleExceptionHandler(error, 'Get instance of recurrence event failed')\n    }\n  }\n\n  /**\n   * @param getReq\n   * @description Get all events in range time\n   */\n  async getEventsService(getReq: GetEventReq): Promise<Event[]> {\n    try {\n      const { room_id, creator_id, creator_email, candidate_id } = getReq\n      await this.authorize()\n      const request = {\n        calendarId: this.calendarId,\n        timeMin: getReq.timeMin,\n        timeMax: getReq.timeMax,\n        timeZone: 'Asia/Ho_Chi_Minh',\n        showDeleted: false,\n        singleEvents: true,\n        privateExtendedProperty: [\n          room_id && room_id !== 'all' && `room_id=${room_id}`,\n          creator_email && `creator_email=${creator_email}`,\n          candidate_id && `candidate_id=${candidate_id}`\n        ].filter((e) => e)\n      }\n\n      let res = (await this.calendar.events.list(request)).data.items\n\n      if (creator_id) {\n        res = res.filter((event: Event) => {\n          const isCreator = event?.extendedProperties?.private?.creator_id === creator_id\n          const isAttendee = event?.extendedProperties?.private?.attendees_id?.split(',').includes(creator_id)\n          if (isCreator || isAttendee) {\n            return this.event(event)\n          }\n        })\n      }\n\n      return res.filter((event: Event) => {\n        if (room_id === 'all' || getReq.candidate_id || room_id === 'null') {\n          return this.event(event)\n        }\n        if (room_id !== 'all' && event?.extendedProperties?.private?.room_id !== 'null') {\n          return this.event(event)\n        }\n      })\n    } catch (error) {\n      this.logger.error('getEventsService()', error)\n      return this.googleExceptionHandler(error, 'Get events failed')\n    }\n  }\n\n  async getCalendarEventByIdService(eventId: string): Promise<Event> {\n    try {\n      await this.authorize()\n      const res = await this.calendar.events.get({\n        calendarId: this.calendarId,\n        eventId: eventId\n      })\n      return res.data\n    } catch (error) {\n      this.logger.error('getCalendarEventByIdService()', error)\n      return this.googleExceptionHandler(error, 'Event not found')\n    }\n  }\n\n  async getColorEventService() {\n    try {\n      await this.authorize()\n      const res = await this.calendar.colors.get()\n      return res.data.calendar\n    } catch (error) {\n      this.logger.error(error)\n      return this.googleExceptionHandler(error, 'Error: get color event failed')\n    }\n  }\n\n  /**\n   * @param id\n   * @param updateEventReq\n   * @description\n   * updateSingleEventService(): update a SINGLE event\n   * updateAllEventService(): update ALL instances of recurring event\n   * updateFollowingEventService(): update all followed instances of recurring event\n   * @returns\n   */\n  async updateEventService(id: string, updateEventReq: UpdateGoogleEventReq): Promise<Event | Event[]> {\n    try {\n      await this.authorize()\n      const event = await this.getCalendarEventByIdService(id)\n      if (!event) {\n        throw new ExceptionNotFound('Event not found')\n      }\n\n      // Copy of updateEventReq and remove some fields\n      const newEvent: Event = _.omit(Object.assign({}, updateEventReq), ['extendedProperties', 'recurrence'])\n\n      // Remove meeting\n      if (updateEventReq?.is_remove_meet) {\n        newEvent.conferenceData = null\n        if (!event.conferenceData) {\n          newEvent.conferenceData = {\n            createRequest: {\n              conferenceSolutionKey: {\n                type: 'hangoutsMeet'\n              },\n              requestId: randomUUID()\n            }\n          }\n        }\n      }\n      // Create new meeting\n      if (updateEventReq.is_new_meet) {\n        newEvent.conferenceData = {\n          createRequest: {\n            conferenceSolutionKey: {\n              type: 'hangoutsMeet'\n            },\n            requestId: randomUUID()\n          }\n        }\n      }\n\n      // Make sure that creator_id is not changed event if User is Admin\n      if (undefined !== updateEventReq.extendedProperties) {\n        updateEventReq.extendedProperties.creator_id = event?.extendedProperties?.private?.creator_id\n      }\n\n      // Main Logic\n      switch (updateEventReq.update_type) {\n        case UpdateType.SINGLE:\n          return this.updateSingleEventService(id, updateEventReq, event, newEvent)\n        case UpdateType.ALL:\n          return this.updateAllEventService(id, updateEventReq, event, newEvent)\n        case UpdateType.FOLLOWING:\n          return this.updateFollowedEventService(id, updateEventReq, event, newEvent)\n      }\n    } catch (error) {\n      this.logger.error('updateEventService()', error)\n      return this.googleExceptionHandler(error, 'Update event failed')\n    }\n  }\n\n  /**\n   * @param newEvent - Copy of updateEventReq and remove some fields\n   * @description Update a single event\n   * 1. Update basic info (info that not relate to Recurrence) of orginal Single Event.\n   *    - date or dateTime:  One of them must be NULL:\n   * 2. Update instance of recurring event.\n   * 3. Update orignal Single Event to be a Recurring event (Add RRULE).\n   * 4. Update Recurring event to be a Single Event (Remove Recurrence)\n   *    - recurrence must = NULL\n   */\n  async updateSingleEventService(\n    id: string,\n    updateEventReq: UpdateGoogleEventReq,\n    orginalEvent: Event,\n    newEvent: Event\n  ): Promise<Event> {\n    try {\n      await this.authorize()\n      if (orginalEvent.recurrence) {\n        throw new ExceptionBadRequest('This is not a Single Event. Use update_type equal ALL or FOLLOWING instead')\n      }\n\n      // 3.\n      if (!orginalEvent?.recurringEventId && updateEventReq?.recurrence) {\n        this.logger.info('3. Update orignal Single Event to be a Recurring event (Add RRULE)')\n        newEvent.recurrence = updateEventReq.recurrence\n      }\n\n      // 4.\n      if (orginalEvent?.recurringEventId && updateEventReq?.recurrence === null) {\n        this.logger.info('4. Update Recurring event to be a Single Event (Remove Recurrence)')\n        newEvent.recurrence = null\n        newEvent.start = orginalEvent.start\n        newEvent.end = orginalEvent.end\n        id = id.split('_')[0]\n      }\n\n      this.logger.info('LOG', {\n        ...orginalEvent,\n        ...newEvent\n      })\n      // 1. + 2.\n      const res = await this.calendar.events.patch({\n        calendarId: this.calendarId,\n        conferenceDataVersion: 1,\n        eventId: id,\n        sendNotifications: true,\n        requestBody: {\n          ...orginalEvent,\n          ...newEvent,\n          summary: `Update-${new Date().toLocaleTimeString(undefined, { timeZone: VN })}`,\n          extendedProperties: {\n            private: {\n              ...orginalEvent?.extendedProperties?.private,\n              ...updateEventReq?.extendedProperties\n            }\n          }\n        }\n      })\n\n      return res.data\n    } catch (error) {\n      this.logger.error('updateSingleEventService()', error)\n      return this.googleExceptionHandler(error, 'Update event failed')\n    }\n  }\n\n  /**\n   * @param id\n   * @param updateEventReq\n   * @param orginalEvent\n   * @param newEvent\n   * @description\n   * 1. Update recurrence event - root Event (not the first instance)\n   */\n  async updateAllEventService(\n    id: string,\n    updateEventReq: UpdateGoogleEventReq,\n    orginalEvent: Event,\n    newEvent: Event\n  ): Promise<Event> {\n    try {\n      await this.authorize()\n\n      const rootId = id.split('_')[0]\n      let instanceEvent: Event\n\n      if (id.includes('_')) {\n        // Not the root event\n        instanceEvent = Object.assign({}, orginalEvent)\n        orginalEvent = await this.getCalendarEventByIdService(rootId)\n      } else {\n        instanceEvent = Object.assign({}, orginalEvent)\n      }\n\n      // 1. Update recurrence event - root Event (not the first instance)\n      newEvent.recurrence = updateEventReq.recurrence\n\n      if (newEvent.start) {\n        const { status, value } = date_diff(newEvent.start.dateTime, instanceEvent.start.dateTime)\n        newEvent.start.dateTime = date_add_milisecond(orginalEvent.start.dateTime, value)\n      }\n\n      if (newEvent.end) {\n        const { status, value } = date_diff(newEvent.end.dateTime, instanceEvent.end.dateTime)\n        newEvent.end.dateTime = date_add_milisecond(orginalEvent.end.dateTime, value)\n      }\n\n      const res = await this.calendar.events.patch({\n        calendarId: this.calendarId,\n        conferenceDataVersion: 1,\n        eventId: rootId,\n        sendNotifications: true,\n        requestBody: {\n          ...orginalEvent,\n          ...newEvent,\n          summary: `Update-${new Date().toLocaleTimeString()}`,\n          extendedProperties: {\n            private: {\n              ...orginalEvent?.extendedProperties?.private,\n              ...updateEventReq?.extendedProperties\n            }\n          }\n        }\n      })\n      return res.data\n    } catch (error) {\n      this.logger.error('updateAllEventService()', error)\n      return this.googleExceptionHandler(error, 'Update event failed')\n    }\n  }\n\n  /**\n   * @param newEvent - Copy of updateEventReq and remove some fields\n   * @description Update Followed instances of recurring event\n   * 1. Check if it's is THE FIRST instance of recurring event, (don't create new recurrence event)\n   *\n   * 2. Update basic info of  Single Event (don't create new recurrence event) if:\n   * -  Update END TIME only (end.dateTime, end.date),\n   * -  Update summary, color, attendees, meeting, ...\n   *\n   * 3. Update instances of recurring event (not the first instance), have to CREATE new recurrence event if:\n   *   - Update All day -> one day, vice versa\n   *   - Update START TIME only  (start.dateTime, start.date). If no recurrence provided, add COUNT in RRULE\n   *   - Update new recurrence RRULE\n   */\n  async updateFollowedEventService(\n    id: string,\n    updateEventReq: UpdateGoogleEventReq,\n    originalEvent: Event,\n    newEvent: Event\n  ): Promise<Event | Event[]> {\n    try {\n      await this.authorize()\n      if (!id.includes('_')) {\n        throw new ExceptionBadRequest(\n          'This is not a instance of Recurring Event. Use update_type equal ALL or SINGLE instead'\n        )\n      }\n\n      const recurrenEvent = await this.getCalendarEventByIdService(originalEvent.recurringEventId)\n\n      if (!recurrenEvent) {\n        throw new ExceptionNotFound('Recurring Event not found')\n      }\n\n      if (updateEventReq.recurrence === null || updateEventReq.recurrence?.length === 0) {\n        throw new ExceptionBadRequest(\n          'Recurrence == NULL can not be used with update_type == FOLLOWING, use SINGLE instead'\n        )\n      }\n\n      const instanceOfRecurringEvent = await this.getInstanceOfRecurrenceService(originalEvent.recurringEventId)\n\n      const followedEvents = instanceOfRecurringEvent.filter((event: Event) => {\n        return (\n          date_sort_asc(\n            event.originalStartTime.date || event.originalStartTime.dateTime,\n            originalEvent.originalStartTime.date || originalEvent.originalStartTime.dateTime\n          ) === 1\n        )\n      })\n\n      if (!instanceOfRecurringEvent || instanceOfRecurringEvent?.length === 0) {\n        throw new ExceptionNotFound('Recurring Event not found')\n      }\n\n      // 1.\n      if (instanceOfRecurringEvent[0].id === originalEvent.id) {\n        this.logger.info(\n          '1. Check if event is the first instance of recurring event %s',\n          originalEvent.recurringEventId\n        )\n        if (recurrenEvent) {\n          const res = await this.calendar.events.patch({\n            calendarId: this.calendarId,\n            conferenceDataVersion: 1,\n            eventId: originalEvent.recurringEventId,\n            sendNotifications: true,\n            requestBody: {\n              ...recurrenEvent,\n              ...newEvent,\n              recurrence: updateEventReq?.recurrence || recurrenEvent.recurrence,\n              summary: `Update-${new Date().toLocaleTimeString()}`,\n              extendedProperties: {\n                private: {\n                  ...recurrenEvent?.extendedProperties?.private,\n                  ...updateEventReq?.extendedProperties\n                }\n              }\n            }\n          })\n          return res.data\n        }\n      }\n\n      // 3.\n      const update_status = this.isCreateRecurrenEvent(originalEvent, updateEventReq, recurrenEvent)\n      if (update_status.result) {\n        this.logger.info(\n          '3. Update an instance of recurring event that is not the first instance, update current Rule and CREATE new one'\n        )\n        const currentRule = RRule.fromString(recurrenEvent.recurrence[0])\n        const updatedRule = new RRule({\n          ...currentRule.options,\n          dtstart: null,\n          count: null,\n          byhour: null,\n          byminute: null,\n          bysecond: null,\n          until: date_substract(originalEvent, 1)\n        }).toString()\n        await this.updateAllEventService(id, { recurrence: [updatedRule] } as UpdateGoogleEventReq, recurrenEvent, {})\n\n        this.logger.info('Create new recurrence event')\n        const newRule = new RRule({\n          ...RRule.fromString(updatedRule).options,\n          count: followedEvents.length,\n          until: null,\n          dtstart: null,\n          byhour: null,\n          byminute: null,\n          bysecond: null\n        }).toString()\n\n        const newRecurrenceEvent: CreateGoogleEventReq = {\n          recurrence: [newRule],\n          ...originalEvent,\n          ...updateEventReq,\n          extendedProperties: {\n            ...originalEvent?.extendedProperties.private\n          }\n        }\n        return await this.createEventsService(newRecurrenceEvent)\n      }\n\n      /** 2.\n       * If update request has end time !== NULL, check if it's diff from original event end time\n       * True: Add amount of time diff to all followed events\n       * False: Do nothing\n       */\n      if (!update_status.result) {\n        let time_diff = 0\n        delete newEvent.recurrence\n        delete newEvent.start\n\n        this.logger.info('2. Update basic info of Single Event')\n\n        if (newEvent.end) {\n          const { status, value } = date_diff(newEvent.end.dateTime, originalEvent.start.dateTime)\n          if (true === status) {\n            time_diff = value\n          }\n        }\n\n        const promiseChain = followedEvents.map(async (event: Event, index: number) => {\n          return new Promise((resolve) => {\n            setTimeout(resolve, 700 * index)\n          }).then(() => {\n            if (Math.abs(time_diff) > 0) {\n              newEvent.end.dateTime = date_add_milisecond(event.start.dateTime, time_diff)\n            }\n            return this.updateSingleEventService(event.id, updateEventReq, event, newEvent)\n          })\n        })\n\n        return await Promise.allSettled(promiseChain)\n      }\n    } catch (error) {\n      this.logger.error('updateFollowedEventService()', error)\n      return this.googleExceptionHandler(error, 'Update followed event failed')\n    }\n  }\n\n  /**\n   * @param query delete TYPE\n   * @description\n   * 1. Delete single event\n   * 2. Delete all events\n   * 3. Delete this and all following events\n   * -\n   * @returns\n   */\n  async deleteEventService(eventId: string, query: DeleteEventReq): Promise<string> {\n    try {\n      await this.authorize()\n      const event = await this.getCalendarEventByIdService(eventId)\n\n      if (!event) {\n        throw new ExceptionBadRequest('Event not found')\n      }\n\n      if (DeleteType.FOLLOWING === query.delete_type) {\n        if (undefined === event.recurringEventId) {\n          throw new ExceptionBadRequest('Event is not a recurrence event, use ALL or SINGLE instead')\n        }\n        const recurrenEvent = await this.getCalendarEventByIdService(event.recurringEventId)\n\n        if (!recurrenEvent) {\n          throw new ExceptionBadRequest('Recurrence event not found')\n        }\n\n        const currentRule = RRule.fromString(recurrenEvent.recurrence[0])\n        const updatedRule = new RRule({\n          ...currentRule.options,\n          dtstart: null,\n          count: null,\n          byhour: null,\n          byminute: null,\n          bysecond: null,\n          until: date_substract(event, 1)\n        }).toString()\n\n        await this.updateAllEventService(\n          event.recurringEventId,\n          { recurrence: [updatedRule] } as UpdateGoogleEventReq,\n          recurrenEvent,\n          {}\n        )\n      }\n\n      if (DeleteType.ALL === query.delete_type) {\n        if (undefined !== event.recurringEventId) {\n          await this.calendar.events.delete({\n            calendarId: this.calendarId,\n            eventId: event.recurringEventId\n          })\n        } else {\n          await this.calendar.events.delete({\n            calendarId: this.calendarId,\n            eventId: event.id\n          })\n        }\n      }\n\n      if (DeleteType.SINGLE === query.delete_type) {\n        await this.calendar.events.delete({\n          calendarId: this.calendarId,\n          eventId: event.id\n        })\n      }\n      return 'Delete event successfully'\n    } catch (error) {\n      this.logger.error(error)\n      return this.googleExceptionHandler(error, 'Error: remove event failed')\n    }\n  }\n\n  /**\n   * @return {Status}\n   * @description check if it's need to create new Recurrence Event if:\n   * 1. New start Time\n   * 2. All day event -> one day event\n   * 3. One day event -> all day event\n   * 4. New Recurrence\n   */\n  private isCreateRecurrenEvent(\n    orignalEvent: Event,\n    updateRequest: UpdateGoogleEventReq,\n    recurrenceEvent: Event\n  ): Status {\n    try {\n      const isNoStartTime = !updateRequest.start?.dateTime && !updateRequest.start?.date\n      const isNoRecurrence = !updateRequest?.recurrence\n\n      if (isNoStartTime && isNoRecurrence) {\n        return { result: false, message: 'No need to create new recurrence event' }\n      }\n      // 4. New Recurrence\n      const isNewRules =\n        updateRequest.recurrence &&\n        JSON.stringify(updateRequest.recurrence)?.split('').sort().join('') !==\n          JSON.stringify(recurrenceEvent.recurrence || updateRequest.recurrence)\n            ?.split('')\n            .sort()\n            .join('')\n\n      if (isNewRules) {\n        this.logger.info('new_recurrence')\n        return { result: true, message: UpdateType.RECURRENCE }\n      }\n\n      // 2. All day event -> one day event\n      const isAllDayEvent = orignalEvent.start?.dateTime && updateRequest.start?.date\n      if (isAllDayEvent) return { result: true, message: UpdateType.ALLDAY }\n\n      // 3. One day event -> all day event\n      const isOneDayEvent = orignalEvent.start?.date && updateRequest.start?.dateTime\n      if (isOneDayEvent) return { result: true, message: UpdateType.ONEDAY }\n\n      // 1. New start Time\n      if (updateRequest.start?.dateTime || updateRequest.start?.date) {\n        const isNewStartTime = date_diff(\n          orignalEvent.start.dateTime || orignalEvent.start.date,\n          updateRequest.start?.dateTime || updateRequest.start?.date\n        )\n\n        if (isNewStartTime.status) {\n          this.logger.info('new_start_time', isNewStartTime)\n          return { result: true, message: UpdateType.START_TIME }\n        }\n      }\n\n      return { result: false, message: UpdateType.NO_CREATE }\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n\n  private event(event: Event): Event {\n    return {\n      id: event?.id,\n      status: event?.status,\n      summary: event?.summary,\n      description: event?.description,\n      location: event?.location,\n      creator: event?.creator,\n      organizer: event?.organizer,\n      attendees: event?.attendees,\n      start: event?.start,\n      end: event?.end,\n      recurringEventId: event?.recurringEventId,\n      originalStartTime: event?.originalStartTime,\n      recurrence: event?.recurrence,\n      extendedProperties: event?.extendedProperties\n    }\n  }\n}\n","import { IsNotEmpty, IsNumber, IsOptional, Length, IsArray, IsString } from 'class-validator'\nimport { ApiProperty } from '@nestjs/swagger'\n\nexport class CreateRoomReq {\n  @ApiProperty({ required: true, example: 'Cali', uniqueItems: true })\n  @IsNotEmpty({ message: 'Room name is required' })\n  @Length(3, 50, { message: 'Room name must be between 3 and 50 characters' })\n  name: string\n\n  @ApiProperty({ required: true, example: 'HL HANOI' })\n  @IsNotEmpty({ message: 'Location is required' })\n  location: string\n\n  @ApiProperty({ required: false, example: ['TV', 'projector'] })\n  @IsArray({ message: 'devcies must be an array' })\n  @IsString({ each: true })\n  devices: string[]\n\n  @ApiProperty({ required: false, example: 'Phòng to nhất SETA' })\n  @IsOptional()\n  description: string\n\n  @ApiProperty({ required: true, example: 10 })\n  @IsNotEmpty({ message: 'Capacity is required' })\n  @IsNumber({}, { message: 'Capacity must be a number' })\n  capacity: number\n\n  @ApiProperty({ required: false, example: 'opening | close' })\n  @IsOptional()\n  status: string\n\n  @ApiProperty({ required: false, example: '0 (white)' })\n  @IsOptional()\n  colorId: string\n}\n","import { CreateRoomReq } from \"./create-room.req\";\n\nexport class CreateRoomRes extends CreateRoomReq {}\n","import { IsNumberString } from 'class-validator'\n\nexport class RoomId {\n  @IsNumberString({}, { message: 'Room ID must be a number' })\n  id: string\n}\n","import { ApiResponseProperty } from '@nestjs/swagger'\nimport { MeetingRoom } from '../../typeorm'\nimport { Metadata } from '../../../types'\nexport class GetRoomRes {\n  @ApiResponseProperty({\n    type: Array,\n    example: [\n      {\n        id: 1,\n        title: 'String',\n        content: 'String',\n        createdDate: new Date()\n      }\n    ]\n  })\n  data: MeetingRoom[]\n\n  @ApiResponseProperty({\n    type: Object,\n    example: {\n      total: 1,\n      itemPage: 1,\n      currentPage: 1,\n      lastPage: 1\n    }\n  })\n  metadata: Metadata\n}\n","import { ApiProperty } from '@nestjs/swagger'\nimport { CreateRoomReq } from './create-room.req'\nimport { IsNotEmpty, IsOptional, Length } from 'class-validator'\n\nexport class UpdateRoomReq extends CreateRoomReq {\n  @ApiProperty({ required: true, example: 'Cali', uniqueItems: true })\n  @Length(3, 50, { message: 'Room name must be between 3 and 50 characters' })\n  @IsOptional()\n  name: string\n}\n","import { Body, Controller, Delete, Get, HttpCode, HttpStatus, Inject, Param, Post, Put, Query } from '@nestjs/common'\nimport { ApiOperation, ApiResponse, ApiTags } from '@nestjs/swagger'\nimport { Logger } from 'winston'\nimport { MeetingRoom } from '../typeorm'\nimport { RoomService } from './room.service'\nimport { CreateRoomReq } from './dtos/create-room.req'\nimport { RoomId } from './dtos/get-room.req'\nimport { CreateRoomRes } from './dtos/create-room.res'\nimport { GetRoomRes } from './dtos/get-rooms.res'\nimport { response } from '../../utils'\nimport { UpdateRoomReq } from './dtos/update-room.req'\n@ApiTags('Room')\n@Controller('room')\nexport class RoomController {\n  constructor(@Inject('winston') private readonly logger: Logger, private readonly roomService: RoomService) {}\n\n  @ApiOperation({ summary: 'Create a meeting room' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'Create a meeting room', type: CreateRoomRes })\n  @Post()\n  async createMeetingRoom(@Body() body: CreateRoomReq) {\n    return response<MeetingRoom>(await this.roomService.createMeetingRoomService(body))\n  }\n\n  @ApiOperation({ summary: 'Get Room List' })\n  @ApiResponse({ type: CreateRoomRes })\n  @Get()\n  async getAllRooms() {\n    return response<MeetingRoom[]>(await this.roomService.getAllRoomsService())\n  }\n\n  @ApiOperation({ summary: 'Get room by ID' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'Create a meeting room', type: GetRoomRes })\n  @Get(':id')\n  async getRoomById(@Param() params: RoomId) {\n    return response<MeetingRoom>(await this.roomService.getRoomByIdService(params.id))\n  }\n\n  @ApiOperation({ summary: 'Update room infomation (Update info, lock room' })\n  @ApiResponse({ status: HttpStatus.CREATED, description: 'Create a meeting room', type: CreateRoomRes })\n  @Put(':id')\n  async updateRoomById(@Body() body: UpdateRoomReq, @Param() params: RoomId) {\n    return response<MeetingRoom>(await this.roomService.updateRoomByIdService(params.id, body))\n  }\n\n  @ApiOperation({ summary: 'Delete room by ID' })\n  @ApiResponse({ status: HttpStatus.NO_CONTENT, description: 'Delete room by ID' })\n  @Delete(':id')\n  async deleteRoomById(@Param() params: RoomId) {\n    return response<string>(await this.roomService.deleteRoomByIdService(params.id))\n  }\n}\n","import { Module } from '@nestjs/common'\nimport { TypeOrmModule } from '@nestjs/typeorm'\nimport { MeetingRoom, UserEntity } from '../typeorm'\nimport { RoomController } from './room.controller'\nimport { RoomService } from './room.service'\n\n@Module({\n  imports: [TypeOrmModule.forFeature([MeetingRoom, UserEntity])],\n  controllers: [RoomController],\n  providers: [RoomService],\n  exports: []\n})\nexport class RoomModule {}\n","import { Inject, Injectable } from '@nestjs/common'\nimport { Logger } from 'winston'\nimport { MeetingRoom } from '../typeorm'\nimport { UserEntity } from '../typeorm'\nimport { CreateRoomReq } from './dtos/create-room.req'\nimport { InjectDataSource, InjectRepository } from '@nestjs/typeorm'\nimport { DataSource, Repository } from 'typeorm'\nimport { ExceptionConflict, ExceptionNotFound } from '../../exception/controlled.exception'\nimport { GetRoomRes } from './dtos/get-rooms.res'\nimport { Pagination } from '../../types'\n\n@Injectable()\nexport class RoomService {\n  constructor(\n    @Inject('winston') private readonly logger: Logger,\n    @InjectDataSource() private readonly dataSource: DataSource,\n    @InjectRepository(MeetingRoom) private readonly meetingRoomRepository: Repository<MeetingRoom>,\n    @InjectRepository(UserEntity) private readonly userEntity: Repository<UserEntity>\n  ) {}\n\n  async createMeetingRoomService(body: CreateRoomReq): Promise<MeetingRoom> {\n    try {\n      const existedRoom = await this.meetingRoomRepository.findOne({\n        where: { name: body.name }\n      })\n\n      if (existedRoom) {\n        throw new ExceptionConflict('Room name already existed')\n      }\n\n      const { name, description, capacity, location, status, devices, colorId } = body\n\n      const newRoom = this.meetingRoomRepository.create({\n        name,\n        description,\n        capacity,\n        location,\n        status,\n        devices,\n        colorId\n      })\n\n      return await this.meetingRoomRepository.save(newRoom)\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n\n  async getAllRoomsService(): Promise<MeetingRoom[]> {\n    try {\n      return await this.meetingRoomRepository.find()\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n\n  async getRoomByIdService(id: string): Promise<any> {\n    try {\n      const room = await this.meetingRoomRepository.findOne({\n        where: { id }\n      })\n\n      // const res = await this.dataSource\n      //   .createQueryBuilder()\n      //   .select([\n      //     'meeting_room.id as id',\n      //     'meeting_room.name as name',\n      //     'meeting_room.description as description',\n      //     'meeting_room.capacity as capacity',\n      //     'meeting_room.location as location',\n      //     'meeting_room.status as status',\n      //     'user_entity.id as user_id',\n      //     'user_entity.name as user_name',\n      //     'user_entity.email as user_email'\n      //   ])\n      //   .from('calendar.meeting_room', 'meeting_room') // Alisas name could === table's name\n      //   .addFrom('core_admin.user', 'user_entity') // Alias HAVE TO !== table's name\n      //   .where('meeting_room.user_id = user_entity.id')\n      //   .getRawMany() // important\n\n      if (!room) {\n        throw new ExceptionNotFound('Room not found')\n      }\n      return room\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n\n  async updateRoomByIdService(id: string, body: CreateRoomReq): Promise<MeetingRoom> {\n    try {\n      const existedRoom = await this.dataSource.manager.findOne(MeetingRoom, {\n        where: { id }\n      })\n\n      if (!existedRoom) {\n        throw new ExceptionNotFound('Room not found')\n      }\n      if (body.name && body.name !== existedRoom.name) {\n        const existedRoomName = await this.dataSource.manager.findOne(MeetingRoom, {\n          where: { name: body.name }\n        })\n\n        if (existedRoomName && existedRoomName.id !== id) {\n          throw new ExceptionConflict('Room name already existed')\n        }\n      }\n\n      for (const key in existedRoom) {\n        if (body[key]) {\n          existedRoom[key] = body[key]\n        }\n      }\n\n      return await this.meetingRoomRepository.save(existedRoom)\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n\n  async deleteRoomByIdService(id: string): Promise<string> {\n    try {\n      const existedRoom = await this.dataSource.manager.findOne(MeetingRoom, {\n        where: { id }\n      })\n\n      if (!existedRoom) {\n        throw new ExceptionNotFound('Room not found')\n      }\n\n      await this.meetingRoomRepository.remove(existedRoom)\n      return 'Room deleted successfully'\n    } catch (error) {\n      this.logger.error(error)\n      throw error\n    }\n  }\n}\n","import { CreateDateColumn, UpdateDateColumn } from 'typeorm'\n\nexport class CommonTimeStamp {\n  @CreateDateColumn({\n    type: 'timestamptz',\n    name: 'created_at'\n  })\n  createdAt?: Date\n\n  @UpdateDateColumn({\n    type: 'timestamptz',\n    name: 'updated_at'\n  })\n  updatedAt?: Date\n}\n","import { Column, Entity, PrimaryColumn, PrimaryGeneratedColumn, ManyToOne, JoinColumn } from 'typeorm'\nimport { CommonTimeStamp } from './common.entity'\nimport { RecurrenEventEntity } from './recurrence_event.entity'\n\n@Entity({\n  name: 'events',\n  schema: process.env.PG_SHCEMA_ADMIN\n})\nexport class EventEntity extends CommonTimeStamp {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column({ type: 'uuid' }) // For cross schema join, schema \"core_admin\"\n  creator_id: string\n\n  @Column()\n  title: string\n\n  @Column()\n  description: string\n\n  @Column()\n  end: string\n\n  @Column()\n  start: string\n\n  @ManyToOne(() => RecurrenEventEntity)\n  @JoinColumn({ name: 'recurrenceId' })\n  recurrenceId: RecurrenEventEntity\n}\n\nexport class EventBaseEntity extends CommonTimeStamp {\n  @PrimaryColumn()\n  id: string\n\n  @Column()\n  status: string\n\n  @Column()\n  summary: string\n\n  @Column()\n  colorId: string\n}\n","import { Column, Entity, PrimaryColumn, PrimaryGeneratedColumn, OneToMany } from 'typeorm'\nimport { CommonTimeStamp } from './common.entity'\n\n\n@Entity({\n  name: 'events',\n  schema: process.env.PG_SHCEMA_ADMIN\n})\nexport class RecurrenEventEntity extends CommonTimeStamp {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column({ type: 'uuid' }) // For cross schema join, schema \"core_admin\"\n  creator_id: string\n\n  @Column()\n  title: string\n\n  @Column()\n  description: string\n\n  @Column()\n  end: string\n\n  @Column()\n  start: string\n}\n","import { Column, Entity, PrimaryGeneratedColumn } from 'typeorm'\nimport { CommonTimeStamp } from './common.entity'\n\n@Entity({\n  name: 'meeting_room',\n  schema: process.env.PG_SCHEMA,\n  synchronize: true\n})\nexport class RoomEntity extends CommonTimeStamp {\n  @PrimaryGeneratedColumn()\n  id?: string\n\n  @Column({\n    type: 'varchar',\n    length: 32,\n    nullable: false,\n    unique: true\n  })\n  name?: string\n\n  @Column({\n    type: 'varchar',\n    length: 55,\n    nullable: false\n  })\n  location: string\n\n  @Column({\n    type: 'simple-array',\n    default: []\n  })\n  devices: string[]\n\n  @Column({\n    type: 'varchar',\n    length: 55,\n    nullable: true\n  })\n  description: string\n\n  @Column({\n    type: 'int',\n    nullable: false\n  })\n  capacity: number\n\n  @Column({\n    length: 11,\n    nullable: true,\n    default: 'opening'\n  })\n  status: string\n\n  @Column({\n    length: 11,\n    default: '0'\n  })\n  colorId: string\n}\n","import { Entity, PrimaryGeneratedColumn } from 'typeorm'\n\n@Entity({\n  name: 'user',\n  schema: 'core_admin',\n  synchronize: false\n})\nexport class UserEntity {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n}\n","import { RoomEntity } from './entities/room.entity'\nimport { UserEntity } from './entities/user.entity'\nimport { EventEntity } from './entities/event.entity'\nimport { RecurrenEventEntity } from './entities/recurrence_event.entity'\n\nexport const entities = [RoomEntity, UserEntity, EventEntity, RecurrenEventEntity]\n\nexport { RoomEntity as MeetingRoom, UserEntity, EventEntity, RecurrenEventEntity }\n","import { Module } from '@nestjs/common'\n\nimport { TypeOrmModule } from '@nestjs/typeorm'\n\nimport { entities } from '.'\nimport { ConfigModule, ConfigService } from '@nestjs/config'\n\n@Module({\n  imports: [\n    TypeOrmModule.forRootAsync({\n      imports: [ConfigModule],\n      inject: [ConfigService],\n      useFactory: (configService: ConfigService) => ({\n        type: 'postgres',\n        host: configService.get('PG_HOST'),\n        port: configService.get('PG_PORT'),\n        username: configService.get('PG_USER'),\n        password: configService.get('PG_PASSWORD'),\n        database: configService.get('PG_DB'),\n        entities: entities,\n        cli: {\n          migrationsDir: __dirname + '/../database/migrations'\n        },\n        extra: {\n          charset: 'utf8mb4_unicode_ci'\n        },\n        synchronize: configService.get('NODE_ENV') === 'development' ? true : false\n      })\n    })\n  ],\n  controllers: [],\n  providers: [],\n  exports: [TypeOrmModule]\n})\nexport class TypeormConfigModule {}\n","import { ApiProperty } from '@nestjs/swagger'\nimport { Type } from 'class-transformer'\nimport { IsNotEmpty, IsNumber, Max, Min } from 'class-validator'\n\nexport interface AuthClient {\n  type?: string\n  client_id?: string\n  client_secret?: string\n  refresh_token?: string\n}\nexport type Status = {\n  result: boolean\n  message: string\n}\n\nexport type Metadata = {\n  total: number\n  itemPage: number\n  currentPage: number\n  lastPage: number\n}\n\nexport class Pagination {\n  @ApiProperty({ required: true, type: Number })\n  @IsNotEmpty({\n    message: 'page is required'\n  })\n  @IsNumber({}, { message: 'page must be a number' })\n  @Min(1, { message: 'page must be greater than 0' })\n  @Type(() => Number)\n  page: number\n\n  @ApiProperty({ required: true, type: Number })\n  @IsNotEmpty({\n    message: 'limit is required'\n  })\n  @IsNumber({}, { message: 'limit must be a number' })\n  @Min(1, { message: 'limit must be greater than 0' })\n  @Max(100, { message: 'limit must be less than 100' })\n  @Type(() => Number)\n  limit: number\n}\n","export enum message {\n  SUCCESS = 'Success',\n  FAIL = 'Fail',\n  GOOGLE_AUTH_FAIL = 'Google auth fail',\n  GOOGLE_AUTHORIZED = \"You're already authorized\"\n}\nexport const VN = 'Asia/Ho_Chi_Minh'\n\nexport const GoogleAuthError = ['invalid_grant', 'invalid_client', 'Unauthorized', 'Invalid Credentials']\n","export enum UpdateType {\n  SINGLE = 'single',\n  FOLLOWING = 'following',\n  ALL = 'all',\n\n  RECURRENCE = 'new_recurrence',\n  START_TIME = 'new_start_time',\n  ALLDAY = 'allday_to_one_day',\n  ONEDAY = 'one_day_to_allday',\n  NO_CREATE = 'No need to create new recurrence event'\n}\n\nexport enum DeleteType {\n  SINGLE = 'single',\n  FOLLOWING = 'following',\n  ALL = 'all'\n}\n\nexport enum GoogleError {\n  INVALID_CLIENT = 'invalid_client',\n  INVALID_GRANT = 'invalid_grant',\n  LIMIT_EXCEEDED = 'Rate Limit Exceeded',\n  UNAUTHORIZED = 'Unauthorized',\n  INVALID_CREDENTIALS = 'Invalid Credentials'\n}\n\nexport enum Role {\n  ADMIN = 'admin',\n  MANAGER = 'manager',\n  HR = 'HR',\n  MEMBER = 'member',\n  DIRECTOR = 'director'\n}\n","export * from './enum'\nexport * from './const'\nexport * from './common'\n","import * as moment from 'moment-timezone'\nimport { Event } from '../modules/google-calendar/gcanlendar.service'\n\nexport function checkOverLapTime(time1: any, time2: any) {\n  const time1Start = moment(time1.start)\n  const time1End = moment(time1.end)\n  const time2Start = moment(time2.start)\n  const time2End = moment(time2.end)\n  if (\n    time1Start.isBetween(time2Start, time2End) ||\n    time1End.isBetween(time2Start, time2End) ||\n    time2Start.isBetween(time1Start, time1End) ||\n    time2End.isBetween(time1Start, time1End)\n  ) {\n    return true\n  }\n  return false\n}\n\nexport function getTheFirstInstance(eventList: Event[]) {\n  if (eventList.length === 0) return null\n  if (eventList.length === 1) return eventList[0]\n  return eventList.sort((a, b) => {\n    return new Date(a.id.split('_')[0]).getTime() - new Date(b.id.split('_')[0]).getTime()\n  })\n}\n\nexport function date_sort_asc(date1: string, date2: string) {\n  if (new Date(date1).getTime() >= new Date(date2).getTime()) {\n    return 1\n  }\n  return -1\n}\n\nexport function date_diff(date1: string, date2: string) {\n  if (new Date(date1).getTime() !== new Date(date2).getTime()) {\n    return {\n      status: true,\n      value: new Date(date1).getTime() - new Date(date2).getTime()\n    }\n  }\n  return {\n    status: false,\n    value: 0\n  }\n}\n\nexport function date_add_milisecond(time: string, amount: number) {\n  return moment(new Date(time)).add(amount, 'milliseconds').toDate().toISOString()\n}\n\nexport function getDateOnly(rrule_string: string) {\n  return moment(rrule_string.split('T')[0]).toDate()\n}\n\n// Hàm này nhận vào một Event, trả về thời gian trước đó\n// Thời gian bị trừ lấy từ trường orginalStartTime\n// days: số ngày cần trừ\n// unit: đơn vị thời gian cần trừ\nexport function date_substract(date: Event, days: number, unit?: any) {\n  return moment(new Date(date.originalStartTime.date || date.originalStartTime.dateTime))\n    .subtract(days, unit || 'days')\n    .endOf('day')\n    .toDate()\n}\n\nexport function date_add(date: Event, days: number, unit?: any) {\n  return moment(new Date(date.originalStartTime.date || date.originalStartTime.dateTime))\n    .add(days, unit || 'days')\n    .toDate()\n}\n","export * from './response'\nexport * from './helper'","import { PipeTransform, ArgumentMetadata, HttpException, Injectable, ConsoleLogger } from '@nestjs/common'\nimport { Validate } from 'class-validator'\nimport { ExceptionBadRequest } from '../exception/controlled.exception'\nimport * as moment from 'moment-timezone'\n\n@Injectable()\nexport class EventDatePipe implements PipeTransform {\n  transform(value: any) {\n    try {\n      if (!value.start || !value.end) {\n        return value\n      }\n\n      if (new Date(value.start.dateTime) > new Date(value.end.dateTime)) {\n        throw new ExceptionBadRequest('start.dateTime must SMALLER than end.dateTime')\n      }\n      if (new Date(value.start.date) > new Date(value?.end?.date)) {\n        throw new ExceptionBadRequest('start.date must SMALLER than end.date')\n      }\n\n      if ((value.start.dateTime && value.end.date) || (value.start.date && value.end.dateTime)) {\n        throw new ExceptionBadRequest('dateTime and date cannot exist used together, one of them must be null')\n      }\n      if (\n        (!value.start.dateTime && !value.start.date) ||\n        (!value.end.dateTime && !value.end.date) ||\n        (!value.start && !value.end)\n      ) {\n        throw new ExceptionBadRequest('start.dateTime or start.date is required')\n      }\n\n      value.start.dateTime\n        ? (value.start.dateTime = moment(value.start.dateTime).tz('Asia/Ho_Chi_Minh').format())\n        : null\n      value.end.dateTime ? (value.end.dateTime = moment(value.end.dateTime).tz('Asia/Ho_Chi_Minh').format()) : null\n\n      value.start.date\n        ? (value.start.date = moment(value.start.date).startOf('day').tz('Asia/Ho_Chi_Minh').format().split('T')[0])\n        : null\n      value.end.date\n        ? (value.end.date = moment(value.end.date).startOf('day').tz('Asia/Ho_Chi_Minh').format().split('T')[0])\n        : null\n\n\n      return value\n    } catch (error) {\n      console.log(error)\n      throw error\n    }\n  }\n}\n","import { ApiProperty, ApiResponseProperty } from '@nestjs/swagger'\n\nexport class CommonReponse<T> {\n  @ApiResponseProperty({ example: 200 })\n  code: number\n\n  @ApiResponseProperty({ example: 'Error' })\n  message: string\n\n  @ApiResponseProperty({ example: [] })\n  data: T\n}\n\n/**\n * response handler\n * @param res\n * @param data\n * @returns\n */\nexport function response<T>(content: T, code?: number, info?: string) {\n  const res = { code: 200, info: 'SUCCESS', content: content || [] }\n\n  if (code) res.code = code\n  if (info) res.info = info\n\n  return res\n}\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/config\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/jwt\");","module.exports = require(\"@nestjs/passport\");","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"@nestjs/typeorm\");","module.exports = require(\"class-transformer\");","module.exports = require(\"class-validator\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"google-auth-library\");","module.exports = require(\"googleapis\");","module.exports = require(\"lodash\");","module.exports = require(\"moment-timezone\");","module.exports = require(\"nest-winston\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"rrule\");","module.exports = require(\"tslib\");","module.exports = require(\"typeorm\");","module.exports = require(\"winston\");","module.exports = require(\"winston-daily-rotate-file\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { Logger } from '@nestjs/common'\n\nimport { HttpAdapterHost, NestFactory } from '@nestjs/core'\nimport { ValidationPipe } from '@nestjs/common'\nimport { CustomeValidationPipe } from './exception/customValidation.exception'\nimport { AppModule } from './app/app.module'\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger'\nimport * as cookieParser from 'cookie-parser'\nimport { GlobalExceptionsFilter } from './exception/httpFilter.exception'\nimport { NestExpressApplication } from '@nestjs/platform-express'\n\nasync function bootstrap() {\n  const app = await NestFactory.create<NestExpressApplication>(AppModule)\n  app.disable('x-powered-by')\n  app.useStaticAssets('public')\n  const globalPrefix = 'api'\n  app.setGlobalPrefix(globalPrefix)\n  app.useGlobalPipes(\n    new CustomeValidationPipe({\n      transform: true,\n      whitelist: true,\n      forbidNonWhitelisted: true,\n      transformOptions: { enableImplicitConversion: true }\n    })\n  )\n  const httpAdapterHost = app.get(HttpAdapterHost)\n  app.useGlobalFilters(new GlobalExceptionsFilter(httpAdapterHost))\n  app.use(cookieParser())\n  app.enableCors({\n    origin: true,\n    credentials: true\n  })\n\n  // Global in\n  const port = process.env.PORT || 3000\n\n  const swaggerConfig = new DocumentBuilder().setTitle('Calendar APIs Docs').setVersion('1.0').build()\n\n  const document = SwaggerModule.createDocument(app, swaggerConfig)\n  SwaggerModule.setup('api/specs', app, document)\n\n  await app.listen(port)\n  Logger.log(`🚀 Application is running on: http://localhost:${port}/${globalPrefix}`)\n}\n\nbootstrap()\n"],"names":[],"sourceRoot":""}